# NativeWind Setup Guide for Expo Router Projects

This guide documents how to set up **NativeWind v4** with **Tailwind CSS** in an Expo Router project, enabling you to use Tailwind CSS utility classes in React Native.

---

## Table of Contents

1. [Prerequisites](#prerequisites)
2. [Installation](#installation)
3. [Configuration Files](#configuration-files)
4. [TypeScript Setup](#typescript-setup)
5. [Importing Global CSS](#importing-global-css)
6. [Usage Examples](#usage-examples)
7. [Troubleshooting](#troubleshooting)

---

## Prerequisites

Before setting up NativeWind, ensure you have:

- An existing Expo project (SDK 50+)
- Node.js 18+ installed
- Expo CLI installed

---

## Installation

### Step 1: Install Required Packages

Run the following command to install NativeWind and Tailwind CSS:

```bash
npm install nativewind tailwindcss
```

Or with yarn:

```bash
yarn add nativewind tailwindcss
```

---

## Configuration Files

### Step 2: Create Tailwind Configuration

Create a `tailwind.config.js` file in the project root:

```javascript
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: [
    "./app/**/*.{js,jsx,ts,tsx}",
    "./components/**/*.{js,jsx,ts,tsx}",
  ],
  presets: [require("nativewind/preset")],
  theme: {
    extend: {},
  },
  plugins: [],
}
```

> **Important:** The `content` array should include all paths where you use Tailwind classes. Add more paths as needed (e.g., `"./screens/**/*.{js,jsx,ts,tsx}"`).

---

### Step 3: Configure Babel

Update or create `babel.config.js` in the project root:

```javascript
module.exports = function (api) {
  api.cache(true);
  return {
    presets: [
      ["babel-preset-expo", { jsxImportSource: "nativewind" }],
      "nativewind/babel",
    ],
    plugins: [
      // Add other plugins here if needed
      // 'react-native-reanimated/plugin', // Must be last if using reanimated
    ],
  };
};
```

> **Note:** If using `react-native-reanimated`, the reanimated plugin must be listed **last** in the plugins array.

---

### Step 4: Configure Metro Bundler

Update or create `metro.config.js` in the project root:

```javascript
const { getDefaultConfig } = require("expo/metro-config");
const { withNativeWind } = require('nativewind/metro');

const config = getDefaultConfig(__dirname);

module.exports = withNativeWind(config, { input: './global.css' });
```

This wraps the default Expo Metro config with NativeWind's configuration.

---

### Step 5: Create Global CSS File

Create a `global.css` file in the project root:

```css
@tailwind base;
@tailwind components;
@tailwind utilities;
```

This file imports Tailwind's base styles, component classes, and utility classes.

---

## TypeScript Setup

### Step 6: Add Type Declarations

NativeWind generates a type declaration file automatically. Ensure your project has the following file:

**`nativewind-env.d.ts`** (auto-generated):

```typescript
/// <reference types="nativewind/types" />

// NOTE: This file should not be edited and should be committed with your source code.
// It is generated by NativeWind.
```

> **Tip:** Commit this file to version control. It provides TypeScript support for NativeWind's `className` prop on React Native components.

---

## Importing Global CSS

### Step 7: Import CSS in Root Layout

Import the global CSS file at the **top** of your root layout file (`app/_layout.tsx`):

```tsx
import '../global.css';
// ... other imports

export default function RootLayout() {
  return (
    // Your layout code
  );
}
```

> **Critical:** The CSS import must be at the very top of the file, before any other imports.

---

## Usage Examples

### Basic Usage

Once configured, use Tailwind classes via the `className` prop:

```tsx
import { View, Text } from 'react-native';

export default function MyComponent() {
  return (
    <View className="flex-1 items-center justify-center bg-white">
      <Text className="text-xl font-bold text-blue-500">
        Hello, NativeWind!
      </Text>
    </View>
  );
}
```

### Responsive Design

```tsx
<View className="p-4 md:p-8 lg:p-12">
  <Text className="text-sm md:text-base lg:text-lg">
    Responsive Text
  </Text>
</View>
```

### Dark Mode Support

```tsx
<View className="bg-white dark:bg-gray-900">
  <Text className="text-black dark:text-white">
    Theme-aware content
  </Text>
</View>
```

### Conditional Styling

```tsx
import { View, Text, Pressable } from 'react-native';

export default function Button({ isActive }: { isActive: boolean }) {
  return (
    <Pressable 
      className={`px-4 py-2 rounded-lg ${isActive ? 'bg-blue-500' : 'bg-gray-300'}`}
    >
      <Text className="text-white font-semibold">
        Press Me
      </Text>
    </Pressable>
  );
}
```

### Using with Pressable States

```tsx
<Pressable 
  className="bg-blue-500 active:bg-blue-700 active:scale-95"
>
  <Text className="text-white">Interactive Button</Text>
</Pressable>
```

---

## Troubleshooting

### Common Issues and Solutions

#### 1. Styles Not Applying

**Problem:** Tailwind classes are not being applied to components.

**Solutions:**
- Clear Metro cache: `npx expo start -c`
- Verify `global.css` is imported in `_layout.tsx`
- Check that file paths in `tailwind.config.js` `content` array match your project structure

#### 2. TypeScript Errors on `className`

**Problem:** TypeScript shows errors for `className` prop on React Native components.

**Solutions:**
- Ensure `nativewind-env.d.ts` exists in project root
- Add `/// <reference types="nativewind/types" />` to the file
- Restart TypeScript server in VS Code: `Ctrl+Shift+P` â†’ "TypeScript: Restart TS Server"

#### 3. Metro Bundler Errors

**Problem:** Metro throws errors related to NativeWind or CSS.

**Solutions:**
- Ensure `metro.config.js` uses `withNativeWind` wrapper
- Clear watchman cache: `watchman watch-del-all`
- Delete `node_modules` and reinstall: `rm -rf node_modules && npm install`

#### 4. Styles Work on Web but Not Native

**Problem:** Tailwind styles render correctly on web but not on iOS/Android.

**Solutions:**
- Verify Babel config includes `nativewind/babel` preset
- Check that `jsxImportSource: "nativewind"` is set in Babel config
- Rebuild the native app: `npx expo prebuild --clean`

#### 5. Hot Reload Not Working for Style Changes

**Problem:** Changes to Tailwind classes don't update without full reload.

**Solutions:**
- Restart Metro with cache clear: `npx expo start -c`
- Ensure you're using NativeWind v4+ (check `package.json`)

---

## Project File Structure

After setup, your project should have these NativeWind-related files:

```
project-root/
â”œâ”€â”€ app/
â”‚   â””â”€â”€ _layout.tsx          # Import global.css here
â”œâ”€â”€ babel.config.js          # NativeWind Babel preset
â”œâ”€â”€ global.css               # Tailwind directives
â”œâ”€â”€ metro.config.js          # withNativeWind wrapper
â”œâ”€â”€ nativewind-env.d.ts      # TypeScript declarations
â”œâ”€â”€ tailwind.config.js       # Tailwind configuration
â””â”€â”€ package.json             # Dependencies
```

---

## Useful Commands

| Command | Description |
|---------|-------------|
| `npx expo start -c` | Start Expo with cache cleared |
| `npx tailwindcss init` | Generate Tailwind config file |
| `npm install nativewind tailwindcss` | Install NativeWind packages |

---

## Resources

- [NativeWind Documentation](https://www.nativewind.dev/)
- [NativeWind v4 Migration Guide](https://www.nativewind.dev/v4/getting-started/migration)
- [Tailwind CSS Documentation](https://tailwindcss.com/docs)
- [Expo Router Documentation](https://docs.expo.dev/router/introduction/)

---

## Summary

To add NativeWind to an Expo Router project:

1. âœ… Install `nativewind` and `tailwindcss`
2. âœ… Create `tailwind.config.js` with NativeWind preset
3. âœ… Configure `babel.config.js` with NativeWind presets
4. âœ… Wrap Metro config with `withNativeWind`
5. âœ… Create `global.css` with Tailwind directives
6. âœ… Import `global.css` in root `_layout.tsx`
7. âœ… Use `className` prop on React Native components

Happy styling! ðŸŽ¨
